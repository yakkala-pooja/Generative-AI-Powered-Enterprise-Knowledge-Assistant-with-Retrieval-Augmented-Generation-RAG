{
  "demo_summary": {
    "timestamp": "2025-07-21T19:36:08.464122",
    "components_tested": [
      "RAG Pipeline",
      "SQL Agent",
      "Integration"
    ],
    "total_queries": 7,
    "successful_queries": 7
  },
  "detailed_results": {
    "initialization": {
      "rag_status": {
        "vector_store_loaded": true,
        "llm_available": false,
        "embedding_model": "sentence-transformers",
        "llm_model": "None",
        "chains_initialized": {
          "qa_chain": false,
          "conversational_chain": false
        },
        "memory_enabled": true,
        "timestamp": "2025-07-21T19:36:07.805145",
        "vector_store_stats": {
          "total_vectors": 19,
          "dimension": 384
        }
      },
      "sql_status": {
        "database_connected": true,
        "sql_agent_available": false,
        "llm_available": false,
        "functionality_level": "basic",
        "available_features": {
          "kpi_queries": true,
          "custom_sql": true,
          "natural_language_queries": false,
          "schema_inspection": true
        },
        "database_url": "sqlite:///contoso_enterprise.db",
        "llm_model": "None",
        "available_kpis": 6,
        "timestamp": "2025-07-21T19:36:07.806388"
      },
      "timestamp": "2025-07-21T19:36:07.806744"
    },
    "rag_demo": [
      {
        "query": {
          "question": "What are the standard procedures for warehouse inventory management?",
          "category": "SOPs"
        },
        "result": {
          "answer": "Based on the retrieved documents, here are the most relevant information sources for your query 'What are the standard procedures for warehouse inventory management?':\n\n1. From sop_1_warehouse_inventory_management_sop.txt (standard_operating_procedure):\n   STANDARD OPERATING PROCEDURE\nDocument ID: SOP-WH-001\nVersion: 2.1\nEffective Date: 2025-06-12\n\nPURPOSE:\nThis procedure outlines the standard process for managing warehouse inventory to ensure accurate ...\n\n2. From sop_1_warehouse_inventory_management_sop.txt (standard_operating_procedure):\n   2. RECEIVING PROCESS\n   2.1 Verify shipment against purchase order\n   2.2 Inspect goods for quality and damage\n   2.3 Update system with received quantities\n   2.4 Place items in designated storage lo...\n\n",
          "sources": [
            {
              "filename": "sop_1_warehouse_inventory_management_sop.txt",
              "document_type": "standard_operating_procedure",
              "chunk_id": 5,
              "content_preview": "STANDARD OPERATING PROCEDURE\nDocument ID: SOP-WH-001\nVersion: 2.1\nEffective Date: 2025-06-12\n\nPURPOSE:\nThis procedure outlines the standard process for managing warehouse inventory to ensure accurate ...",
              "relevance_score": 0.6160489320755005
            },
            {
              "filename": "sop_1_warehouse_inventory_management_sop.txt",
              "document_type": "standard_operating_procedure",
              "chunk_id": 6,
              "content_preview": "2. RECEIVING PROCESS\n   2.1 Verify shipment against purchase order\n   2.2 Inspect goods for quality and damage\n   2.3 Update system with received quantities\n   2.4 Place items in designated storage lo...",
              "relevance_score": 0.7169933319091797
            }
          ],
          "query": "What are the standard procedures for warehouse inventory management?",
          "timestamp": "2025-07-21T19:36:08.102775",
          "model_used": "retrieval_only",
          "source_count": 2,
          "note": "This response uses document retrieval only. For AI-generated answers, please provide an OpenAI API key."
        },
        "success": true
      },
      {
        "query": {
          "question": "How should we handle supplier quality issues?",
          "category": "Quality Management"
        },
        "result": {
          "answer": "Based on the retrieved documents, here are the most relevant information sources for your query 'How should we handle supplier quality issues?':\n\n1. From support_log_2_product_quality_issue_investigation.txt (customer_support_log):\n   PROCESS IMPROVEMENTS:\n1. Enhanced supplier quality monitoring\n2. Real-time quality dashboard implementation\n3. Automated defect trend analysis\n4. Customer quality portal development\n\nPREVENTION MEASUR...\n\n2. From support_log_2_product_quality_issue_investigation.txt (customer_support_log):\n   CORRECTIVE ACTIONS:\nImmediate (0-48 hours):\n- Recalled all components from same production lot\n- Expedited replacement with 100% tested units\n- Implemented enhanced incoming inspection\n\nShort-term (1-...\n\n3. From support_log_2_product_quality_issue_investigation.txt (customer_support_log):\n   INVESTIGATION FINDINGS:\nRoot Cause Analysis:\n1. Primary Cause: Supplier manufacturing process variation\n   - Temperature control issue during production week of 2025-05-03\n   - Quality control samplin...\n\n",
          "sources": [
            {
              "filename": "support_log_2_product_quality_issue_investigation.txt",
              "document_type": "customer_support_log",
              "chunk_id": 18,
              "content_preview": "PROCESS IMPROVEMENTS:\n1. Enhanced supplier quality monitoring\n2. Real-time quality dashboard implementation\n3. Automated defect trend analysis\n4. Customer quality portal development\n\nPREVENTION MEASUR...",
              "relevance_score": 0.7439990043640137
            },
            {
              "filename": "support_log_2_product_quality_issue_investigation.txt",
              "document_type": "customer_support_log",
              "chunk_id": 17,
              "content_preview": "CORRECTIVE ACTIONS:\nImmediate (0-48 hours):\n- Recalled all components from same production lot\n- Expedited replacement with 100% tested units\n- Implemented enhanced incoming inspection\n\nShort-term (1-...",
              "relevance_score": 0.8223673701286316
            },
            {
              "filename": "support_log_2_product_quality_issue_investigation.txt",
              "document_type": "customer_support_log",
              "chunk_id": 16,
              "content_preview": "INVESTIGATION FINDINGS:\nRoot Cause Analysis:\n1. Primary Cause: Supplier manufacturing process variation\n   - Temperature control issue during production week of 2025-05-03\n   - Quality control samplin...",
              "relevance_score": 0.8400976061820984
            }
          ],
          "query": "How should we handle supplier quality issues?",
          "timestamp": "2025-07-21T19:36:08.123790",
          "model_used": "retrieval_only",
          "source_count": 3,
          "note": "This response uses document retrieval only. For AI-generated answers, please provide an OpenAI API key."
        },
        "success": true
      },
      {
        "query": {
          "question": "What are the temperature requirements for cold chain management?",
          "category": "Cold Chain"
        },
        "result": {
          "answer": "Based on the retrieved documents, here are the most relevant information sources for your query 'What are the temperature requirements for cold chain management?':\n\n1. From sop_3_cold_chain_management_sop.txt (standard_operating_procedure):\n   STANDARD OPERATING PROCEDURE\nDocument ID: SOP-CC-003\nVersion: 3.0\nEffective Date: 2025-02-05\n\nPURPOSE:\nTo maintain product integrity during cold chain transportation and storage operations.\n\nSCOPE:\nAp...\n\n",
          "sources": [
            {
              "filename": "sop_3_cold_chain_management_sop.txt",
              "document_type": "standard_operating_procedure",
              "chunk_id": 9,
              "content_preview": "STANDARD OPERATING PROCEDURE\nDocument ID: SOP-CC-003\nVersion: 3.0\nEffective Date: 2025-02-05\n\nPURPOSE:\nTo maintain product integrity during cold chain transportation and storage operations.\n\nSCOPE:\nAp...",
              "relevance_score": 0.7272635102272034
            }
          ],
          "query": "What are the temperature requirements for cold chain management?",
          "timestamp": "2025-07-21T19:36:08.150479",
          "model_used": "retrieval_only",
          "source_count": 1,
          "note": "This response uses document retrieval only. For AI-generated answers, please provide an OpenAI API key."
        },
        "success": true
      },
      {
        "query": {
          "question": "How do we resolve customer delivery delays?",
          "category": "Customer Service"
        },
        "result": {
          "answer": "Based on the retrieved documents, here are the most relevant information sources for your query 'How do we resolve customer delivery delays?':\n\n1. From support_log_1_delivery_delay_issue_resolution.txt (customer_support_log):\n   CUSTOMER SUPPORT LOG\nTicket ID: CS-2024-83009\nDate Created: 2025-05-01\nPriority: High\nStatus: Resolved\nCustomer: Global Manufacturing Corp\nAccount Manager: Sarah Johnson\n\nISSUE DESCRIPTION:\nCustomer r...\n\n2. From support_log_1_delivery_delay_issue_resolution.txt (customer_support_log):\n   CUSTOMER COMMUNICATION:\n2025-05-01 09:00 - Initial notification of delay received\n2025-05-01 09:30 - Customer contacted, situation explained\n2025-05-01 10:00 - Management escalation, expedited shippin...\n\n",
          "sources": [
            {
              "filename": "support_log_1_delivery_delay_issue_resolution.txt",
              "document_type": "customer_support_log",
              "chunk_id": 11,
              "content_preview": "CUSTOMER SUPPORT LOG\nTicket ID: CS-2024-83009\nDate Created: 2025-05-01\nPriority: High\nStatus: Resolved\nCustomer: Global Manufacturing Corp\nAccount Manager: Sarah Johnson\n\nISSUE DESCRIPTION:\nCustomer r...",
              "relevance_score": 0.6897011399269104
            },
            {
              "filename": "support_log_1_delivery_delay_issue_resolution.txt",
              "document_type": "customer_support_log",
              "chunk_id": 13,
              "content_preview": "CUSTOMER COMMUNICATION:\n2025-05-01 09:00 - Initial notification of delay received\n2025-05-01 09:30 - Customer contacted, situation explained\n2025-05-01 10:00 - Management escalation, expedited shippin...",
              "relevance_score": 0.6982445120811462
            }
          ],
          "query": "How do we resolve customer delivery delays?",
          "timestamp": "2025-07-21T19:36:08.173613",
          "model_used": "retrieval_only",
          "source_count": 2,
          "note": "This response uses document retrieval only. For AI-generated answers, please provide an OpenAI API key."
        },
        "success": true
      }
    ],
    "sql_demo": {
      "kpi_results": [
        {
          "kpi": "sales_by_region",
          "success": true,
          "result": {
            "kpi_name": "sales_by_region",
            "description": "Total sales amount by region/state",
            "data": [
              {
                "Region": "OR",
                "TotalSales": 1705064.1080625828,
                "TransactionCount": 2606,
                "UniqueCustomers": 259
              },
              {
                "Region": "CA",
                "TotalSales": 1596976.0102944304,
                "TransactionCount": 2465,
                "UniqueCustomers": 243
              },
              {
                "Region": "CO",
                "TotalSales": 1589313.5932300224,
                "TransactionCount": 2511,
                "UniqueCustomers": 249
              },
              {
                "Region": "WA",
                "TotalSales": 1579292.843599868,
                "TransactionCount": 2418,
                "UniqueCustomers": 249
              }
            ],
            "row_count": 4,
            "columns": [
              "Region",
              "TotalSales",
              "TransactionCount",
              "UniqueCustomers"
            ],
            "execution_time": "2025-07-21T19:36:08.241992",
            "query": "\n                SELECT \n                    c.StateProvince as Region,\n                    SUM(s.SalesAmount) as TotalSales,\n                    COUNT(s.SalesKey) as TransactionCount,\n                    COUNT(DISTINCT s.CustomerKey) as UniqueCustomers\n                FROM sales s\n                JOIN customer c ON s.CustomerKey = c.CustomerKey\n                GROUP BY c.StateProvince\n                ORDER BY TotalSales DESC\n                "
          }
        },
        {
          "kpi": "revenue_by_product_category",
          "success": true,
          "result": {
            "kpi_name": "revenue_by_product_category",
            "description": "Revenue breakdown by product category",
            "data": [
              {
                "Category": "Sports",
                "TotalRevenue": 1479324.6862520028,
                "TotalProfit": 778787.4577808721,
                "TransactionCount": 2019,
                "AvgUnitPrice": 295.0179180037249
              },
              {
                "Category": "Clothing",
                "TotalRevenue": 1358656.1489527328,
                "TotalProfit": 683468.2425564206,
                "TransactionCount": 1945,
                "AvgUnitPrice": 283.4255405632985
              },
              {
                "Category": "Books",
                "TotalRevenue": 1321567.1463771965,
                "TotalProfit": 572941.9310313441,
                "TransactionCount": 2103,
                "AvgUnitPrice": 251.5339597223107
              },
              {
                "Category": "Electronics",
                "TotalRevenue": 1160887.1703675133,
                "TotalProfit": 455028.2313210869,
                "TransactionCount": 1988,
                "AvgUnitPrice": 233.79860886874755
              },
              {
                "Category": "Home & Garden",
                "TotalRevenue": 1150211.403237458,
                "TotalProfit": 435383.8181528382,
                "TransactionCount": 1945,
                "AvgUnitPrice": 239.31324142077224
              }
            ],
            "row_count": 5,
            "columns": [
              "Category",
              "TotalRevenue",
              "TotalProfit",
              "TransactionCount",
              "AvgUnitPrice"
            ],
            "execution_time": "2025-07-21T19:36:08.264563",
            "query": "\n                SELECT \n                    p.Category,\n                    SUM(s.SalesAmount) as TotalRevenue,\n                    SUM(s.Profit) as TotalProfit,\n                    COUNT(s.SalesKey) as TransactionCount,\n                    AVG(s.UnitPrice) as AvgUnitPrice\n                FROM sales s\n                JOIN product p ON s.ProductKey = p.ProductKey\n                GROUP BY p.Category\n                ORDER BY TotalRevenue DESC\n                "
          }
        },
        {
          "kpi": "top_products",
          "success": true,
          "result": {
            "kpi_name": "top_products",
            "description": "Top 10 best-selling products by revenue",
            "data": [
              {
                "ProductName": "Computers Product 20",
                "Category": "Electronics",
                "Subcategory": "Computers",
                "TotalRevenue": 43550.69294822339,
                "TotalQuantitySold": 90,
                "TransactionCount": 34
              },
              {
                "ProductName": "Fiction Product 19",
                "Category": "Books",
                "Subcategory": "Fiction",
                "TotalRevenue": 43262.076935787896,
                "TotalQuantitySold": 93,
                "TransactionCount": 33
              },
              {
                "ProductName": "Fitness Product 17",
                "Category": "Sports",
                "Subcategory": "Fitness",
                "TotalRevenue": 42366.93887805703,
                "TotalQuantitySold": 88,
                "TransactionCount": 32
              },
              {
                "ProductName": "Accessories Product 11",
                "Category": "Clothing",
                "Subcategory": "Accessories",
                "TotalRevenue": 39837.938708942216,
                "TotalQuantitySold": 100,
                "TransactionCount": 36
              },
              {
                "ProductName": "Fiction Product 15",
                "Category": "Books",
                "Subcategory": "Fiction",
                "TotalRevenue": 39826.563225812846,
                "TotalQuantitySold": 92,
                "TransactionCount": 34
              },
              {
                "ProductName": "Non-Fiction Product 9",
                "Category": "Books",
                "Subcategory": "Non-Fiction",
                "TotalRevenue": 39295.035050484876,
                "TotalQuantitySold": 79,
                "TransactionCount": 31
              },
              {
                "ProductName": "Computers Product 15",
                "Category": "Electronics",
                "Subcategory": "Computers",
                "TotalRevenue": 37054.096241798754,
                "TotalQuantitySold": 75,
                "TransactionCount": 30
              },
              {
                "ProductName": "Furniture Product 19",
                "Category": "Home & Garden",
                "Subcategory": "Furniture",
                "TotalRevenue": 37002.61678892995,
                "TotalQuantitySold": 86,
                "TransactionCount": 36
              },
              {
                "ProductName": "Non-Fiction Product 3",
                "Category": "Books",
                "Subcategory": "Non-Fiction",
                "TotalRevenue": 36772.08076190014,
                "TotalQuantitySold": 80,
                "TransactionCount": 34
              },
              {
                "ProductName": "Outdoor Product 14",
                "Category": "Sports",
                "Subcategory": "Outdoor",
                "TotalRevenue": 36298.725445816905,
                "TotalQuantitySold": 76,
                "TransactionCount": 33
              }
            ],
            "row_count": 10,
            "columns": [
              "ProductName",
              "Category",
              "Subcategory",
              "TotalRevenue",
              "TotalQuantitySold",
              "TransactionCount"
            ],
            "execution_time": "2025-07-21T19:36:08.290490",
            "query": "\n                SELECT \n                    p.ProductName,\n                    p.Category,\n                    p.Subcategory,\n                    SUM(s.SalesAmount) as TotalRevenue,\n                    SUM(s.Quantity) as TotalQuantitySold,\n                    COUNT(s.SalesKey) as TransactionCount\n                FROM sales s\n                JOIN product p ON s.ProductKey = p.ProductKey\n                GROUP BY p.ProductKey, p.ProductName, p.Category, p.Subcategory\n                ORDER BY TotalRevenue DESC\n                LIMIT 10\n                "
          }
        }
      ],
      "nl_results": [
        {
          "query": "What are the total sales by region?",
          "success": true,
          "result": {
            "question": "What are the total sales by region?",
            "answer": "Based on your question, I executed the 'sales_by_region' KPI query. Results show 4 records.",
            "kpi_result": {
              "kpi_name": "sales_by_region",
              "description": "Total sales amount by region/state",
              "data": [
                {
                  "Region": "OR",
                  "TotalSales": 1705064.1080625828,
                  "TransactionCount": 2606,
                  "UniqueCustomers": 259
                },
                {
                  "Region": "CA",
                  "TotalSales": 1596976.0102944304,
                  "TransactionCount": 2465,
                  "UniqueCustomers": 243
                },
                {
                  "Region": "CO",
                  "TotalSales": 1589313.5932300224,
                  "TransactionCount": 2511,
                  "UniqueCustomers": 249
                },
                {
                  "Region": "WA",
                  "TotalSales": 1579292.843599868,
                  "TransactionCount": 2418,
                  "UniqueCustomers": 249
                }
              ],
              "row_count": 4,
              "columns": [
                "Region",
                "TotalSales",
                "TransactionCount",
                "UniqueCustomers"
              ],
              "execution_time": "2025-07-21T19:36:08.311711",
              "query": "\n                SELECT \n                    c.StateProvince as Region,\n                    SUM(s.SalesAmount) as TotalSales,\n                    COUNT(s.SalesKey) as TransactionCount,\n                    COUNT(DISTINCT s.CustomerKey) as UniqueCustomers\n                FROM sales s\n                JOIN customer c ON s.CustomerKey = c.CustomerKey\n                GROUP BY c.StateProvince\n                ORDER BY TotalSales DESC\n                "
            },
            "agent_used": false,
            "timestamp": "2025-07-21T19:36:08.311747"
          }
        },
        {
          "query": "Which product categories generate the most revenue?",
          "success": true,
          "result": {
            "question": "Which product categories generate the most revenue?",
            "answer": "I couldn't process your question. Please try one of the predefined KPI queries.",
            "available_kpis": [
              "sales_by_region",
              "revenue_by_product_category",
              "monthly_sales_trend",
              "top_products",
              "customer_lifetime_value",
              "supply_chain_performance"
            ],
            "agent_used": false,
            "timestamp": "2025-07-21T19:36:08.312250"
          }
        },
        {
          "query": "Show me the top 5 products by sales",
          "success": true,
          "result": {
            "question": "Show me the top 5 products by sales",
            "answer": "I couldn't process your question. Please try one of the predefined KPI queries.",
            "available_kpis": [
              "sales_by_region",
              "revenue_by_product_category",
              "monthly_sales_trend",
              "top_products",
              "customer_lifetime_value",
              "supply_chain_performance"
            ],
            "agent_used": false,
            "timestamp": "2025-07-21T19:36:08.312602"
          }
        }
      ]
    },
    "integration_demo": [
      {
        "name": "Supply Chain Analysis",
        "rag_success": true,
        "rag_sources": 1,
        "sql_success": true,
        "sql_rows": 5
      },
      {
        "name": "Quality Management",
        "rag_success": true,
        "rag_sources": 2,
        "sql_success": true,
        "sql_rows": 10
      },
      {
        "name": "Performance Review",
        "rag_success": true,
        "rag_sources": 1,
        "sql_success": true,
        "sql_rows": 48
      }
    ]
  }
}